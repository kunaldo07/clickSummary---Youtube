<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Extension Popup Test</title>
  <link rel="stylesheet" href="popup.css">
  <style>
    body {
      margin: 20px;
      background: #f0f0f0;
      padding: 20px;
    }
    
    .test-container {
      max-width: 400px;
      margin: 0 auto;
    }
    
    .test-controls {
      margin-bottom: 20px;
      text-align: center;
    }
    
    .test-controls button {
      margin: 5px;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #007bff;
      color: white;
    }
    
    .test-controls button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>🧪 Extension Popup Test</h1>
    
    <div class="test-controls">
      <button onclick="showLoadingView()">Show Loading</button>
      <button onclick="showNotAuthView()">Show Not Authenticated</button>
      <button onclick="showAuthView()">Show Authenticated</button>
    </div>
    
    <!-- Popup HTML Content -->
    <div class="popup-container">
      <!-- Header -->
      <div class="header">
        <h1>🎥 YouTube Summarizer</h1>
        <p id="header-subtitle">AI-powered video summaries</p>
      </div>

      <!-- Loading State -->
      <div id="loading-view" class="view">
        <div class="content">
          <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Checking authentication...</p>
          </div>
        </div>
      </div>

      <!-- Not Authenticated View -->
      <div id="not-authenticated-view" class="view hidden">
        <div class="content">
          <div class="auth-prompt">
            <div class="icon-large">🔐</div>
            <h2>Sign In Required</h2>
            <p>Please sign in to use the YouTube Summarizer extension.</p>
            
            <button id="sign-in-btn" class="primary-btn">
              <span class="btn-icon">🚀</span>
              Sign In / Get Started
            </button>
            
            <div class="features-preview">
              <h3>✨ What you'll get:</h3>
              <ul>
                <li>📝 AI-powered video summaries</li>
                <li>⚡ Instant transcript analysis</li>
                <li>🎯 Key insights extraction</li>
                <li>💾 Summary history & favorites</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Authenticated View -->
      <div id="authenticated-view" class="view hidden">
        <div class="content">
          <!-- User Profile Section -->
          <div class="user-profile">
            <div class="user-avatar">
              <img id="user-avatar" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiM4YjVjZjYiLz4KPHR4dCB4PSI1MCUiIHk9IjUwJSIgZHk9IjAuMzVlbSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMThweCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkpEPC90ZXh0Pgo8L3N2Zz4K" alt="Profile" />
            </div>
            <div class="user-info">
              <h2 id="user-name">John Doe</h2>
              <p id="user-email">john.doe@example.com</p>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="section">
            <button id="go-to-website-btn" class="primary-btn">
              <span class="btn-icon">🌐</span>
              Go to Website
            </button>
          </div>

          <!-- Plan Details -->
          <div class="section">
            <div class="plan-card">
              <div class="plan-header">
                <h3 id="plan-name">Free Plan</h3>
                <span id="plan-status" class="plan-badge trial">7-Day Trial</span>
              </div>
              <div class="plan-details">
                <div class="plan-stat">
                  <span class="stat-label">Summaries this month:</span>
                  <span id="summaries-count" class="stat-value">3</span>
                </div>
                <div class="plan-stat">
                  <span class="stat-label">Plan expires:</span>
                  <span id="plan-expiry" class="stat-value">5 days left in trial</span>
                </div>
              </div>
              <button id="upgrade-plan-btn" class="secondary-btn">
                <span class="btn-icon">⭐</span>
                Upgrade to Premium
              </button>
            </div>
          </div>

          <!-- Extension Status -->
          <div class="section">
            <div class="status-card">
              <div class="status-indicator">
                <span id="backend-status-icon">🟢</span>
                <span id="backend-status-text">Connected to backend</span>
              </div>
              <small id="extension-version" class="version-info">Extension v1.0.0</small>
            </div>
          </div>

          <!-- Quick Settings -->
          <div class="section">
            <details class="settings-accordion">
              <summary>⚙️ Quick Settings</summary>
              <div class="settings-content">
                <div class="setting-item">
                  <label for="auto-summarize">Auto-summarize videos</label>
                  <input type="checkbox" id="auto-summarize" checked>
                </div>
                <div class="setting-item">
                  <label for="summary-style">Summary style:</label>
                  <select id="summary-style">
                    <option value="insightful">Insightful</option>
                    <option value="funny">Funny</option>
                    <option value="actionable">Actionable</option>
                    <option value="controversial">Controversial</option>
                  </select>
                </div>
              </div>
            </details>
          </div>

          <!-- Sign Out -->
          <div class="section">
            <button id="sign-out-btn" class="danger-btn">
              <span class="btn-icon">🚪</span>
              Sign Out
            </button>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <small>Made with ❤️ for better YouTube experience</small>
      </div>
    </div>
  </div>

  <script>
    function showView(viewId) {
      // Hide all views
      const views = document.querySelectorAll('.view');
      views.forEach(view => view.classList.add('hidden'));
      
      // Show target view
      const targetView = document.getElementById(viewId);
      if (targetView) {
        targetView.classList.remove('hidden');
      }
    }

    function showLoadingView() {
      showView('loading-view');
      document.getElementById('header-subtitle').textContent = 'AI-powered video summaries';
    }

    function showNotAuthView() {
      showView('not-authenticated-view');
      document.getElementById('header-subtitle').textContent = 'AI-powered video summaries';
    }

    function showAuthView() {
      showView('authenticated-view');
      document.getElementById('header-subtitle').textContent = 'Welcome back, John!';
    }

    // Start with loading view
    showLoadingView();
    
    // Auto-switch to auth view after 1 second for demo
    setTimeout(() => {
      showAuthView();
    }, 1000);
  </script>
</body>
</html>

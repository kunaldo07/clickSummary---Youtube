<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Summarizer</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <div class="header">
      <h1>🎥 YouTube Summarizer</h1>
      <p id="header-subtitle">AI-powered video summaries</p>
    </div>

    <!-- Loading State -->
    <div id="loading-view" class="view">
      <div class="content">
        <div class="loading-spinner">
          <div class="spinner"></div>
          <p>Checking authentication...</p>
        </div>
      </div>
    </div>

    <!-- Not Authenticated View -->
    <div id="not-authenticated-view" class="view hidden">
      <div class="content">
        <div class="auth-prompt">
          <div class="icon-large">🔐</div>
          <h2>Sign In Required</h2>
          <p>Please sign in to use the YouTube Summarizer extension.</p>
          
          <button id="sign-in-btn" class="primary-btn">
            <span class="btn-icon">🔑</span>
            Sign In with Google
          </button>
          
          <div class="sync-status" id="sync-status">
            <small>🔄 Checking for existing session...</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Authenticated View -->
    <div id="authenticated-view" class="view hidden">
      <div class="content">
        <!-- User Profile Section -->
        <div class="user-profile">
          <div class="user-avatar">
            <img id="user-avatar" src="" alt="Profile" />
          </div>
          <div class="user-info">
            <h2 id="user-name">Loading...</h2>
            <p id="user-email">Loading...</p>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="section">
          <button id="go-to-website-btn" class="primary-btn">
            <span class="btn-icon">🌐</span>
            Go to Website
          </button>
        </div>

        <!-- Plan Details -->
        <div class="section">
          <div class="plan-card">
            <div class="plan-header">
              <h3 id="plan-name">Free Plan</h3>
              <span id="plan-status" class="plan-badge">Active</span>
            </div>
            <div class="plan-details">
              <div class="plan-stat">
                <span class="stat-label">Summaries this month:</span>
                <span id="summaries-count" class="stat-value">0</span>
              </div>
              <div class="plan-stat">
                <span class="stat-label">Plan expires:</span>
                <span id="plan-expiry" class="stat-value">Never</span>
              </div>
            </div>
            <button id="upgrade-plan-btn" class="secondary-btn hidden">
              <span class="btn-icon">⭐</span>
              Upgrade to Premium
            </button>
          </div>
        </div>

        <!-- Extension Status -->
        <div class="section">
          <div class="status-card">
            <div class="status-indicator">
              <span id="backend-status-icon">🟢</span>
              <span id="backend-status-text">Connected to backend</span>
            </div>
            <small id="extension-version" class="version-info">Extension v1.0.0</small>
          </div>
        </div>

        <!-- Quick Settings -->
        <div class="section">
          <details class="settings-accordion">
            <summary>⚙️ Quick Settings</summary>
            <div class="settings-content">
              <div class="setting-item">
                <label for="auto-summarize">Auto-summarize videos</label>
                <input type="checkbox" id="auto-summarize" checked>
              </div>
              <div class="setting-item">
                <label for="summary-style">Summary style:</label>
                <select id="summary-style">
                  <option value="insightful">Insightful</option>
                  <option value="funny">Funny</option>
                  <option value="actionable">Actionable</option>
                  <option value="controversial">Controversial</option>
                </select>
              </div>
            </div>
          </details>
        </div>

        <!-- Sign Out -->
        <div class="section">
          <button id="sign-out-btn" class="danger-btn">
            <span class="btn-icon">🚪</span>
            Sign Out
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <small>Made with ❤️ for better YouTube experience</small>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
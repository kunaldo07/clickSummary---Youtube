<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Summarizer - Test Suite</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
        }
        
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-result {
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            font-family: monospace;
        }
        
        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .sample-output {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            background: #f8f9fa;
            margin: 16px 0;
        }
        
        button {
            background: #0969da;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 8px;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #0550ae;
            transform: translateY(-2px);
        }
        
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 16px 0;
        }
        
        .summary-section {
            margin-bottom: 24px;
            padding: 20px;
            background: linear-gradient(145deg, #f8f9ff 0%, #ffffff 100%);
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
        }
        
        .section-headline {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .point-text {
            font-size: 14px;
            line-height: 1.6;
            color: #374151;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .point-text::before {
            content: 'â–¶';
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§ª YouTube Summarizer Test Suite</h1>
        <p>Comprehensive testing for summary parsing and formatting functionality</p>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ Quick Test</h2>
        <p>Run a quick test to verify your summary functionality is working correctly:</p>
        <button onclick="runQuickTest()">â–¶ï¸ Run Quick Test</button>
        <button onclick="runFullTest()">ğŸ”¬ Run Full Test Suite</button>
        <button onclick="clearResults()">ğŸ—‘ï¸ Clear Results</button>
        
        <div id="quick-results"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ Test Input Samples</h2>
        <p>These are the different AI response formats your extension should handle:</p>
        
        <h3>âœ… Proper Format (should work perfectly):</h3>
        <div class="code-block">ğŸ¤ Exploring Key Themes
ğŸš€ Revolutionary AI development enables 10x faster learning
ğŸ’° Investment strategies focus on diversification
ğŸ§  Cognitive techniques improve information retention

ğŸŒ Strategic Implications
âš¡ Market disruption patterns show accelerating adoption
ğŸ“ˆ Growth opportunities in sustainable technology</div>

        <h3>ğŸ“ Markdown Format (should be parsed):</h3>
        <div class="code-block">## Key Insights
- Revolutionary AI development
- Investment strategies  
- Cognitive techniques

## Strategic Implications
- Market disruption patterns
- Growth opportunities</div>

        <h3>ğŸ“Š Numbered Format (should be parsed):</h3>
        <div class="code-block">Key Points:
1. Revolutionary AI development enables faster learning
2. Investment strategies should focus on diversification
3. Cognitive techniques improve retention
4. Market disruption is accelerating</div>
    </div>

    <div class="test-section">
        <h2>ğŸ¨ Expected Output Preview</h2>
        <p>This is how your summaries should look when properly formatted:</p>
        
        <div class="sample-output">
            <div class="summary-section">
                <h4 class="section-headline">ğŸ¤ Exploring Key Themes</h4>
                <div class="section-content">
                    <div class="point-text">ğŸš€ Revolutionary AI development enables 10x faster learning across multiple domains</div>
                    <div class="point-text">ğŸ’° Investment strategies focus on diversification and long-term planning approaches</div>
                    <div class="point-text">ğŸ§  Cognitive techniques improve information retention and processing efficiency</div>
                </div>
            </div>
            
            <div class="summary-section">
                <h4 class="section-headline">ğŸŒ Strategic Implications</h4>
                <div class="section-content">
                    <div class="point-text">âš¡ Market disruption patterns show accelerating technological adoption cycles</div>
                    <div class="point-text">ğŸ“ˆ Growth opportunities emerge in sustainable technology and renewable energy</div>
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ Browser Console Test</h2>
        <p>Copy and paste this code into your browser console on a YouTube page to test the extension:</p>
        <button onclick="copyConsoleTest()">ğŸ“‹ Copy Console Test Code</button>
        
        <div class="code-block" id="console-test-code">
// Quick test - paste this in browser console on YouTube page
(function() {
  const container = document.querySelector('#youtube-summarizer-container');
  if (!container) {
    console.log('âŒ Extension not found on this page');
    return;
  }
  
  const summaryContent = container.querySelector('#summary-content');
  if (summaryContent) {
    summaryContent.innerHTML = `
      &lt;div class="engaging-list"&gt;
        &lt;div class="summary-section"&gt;
          &lt;h4 class="section-headline"&gt;ğŸ§ª Test Results&lt;/h4&gt;
          &lt;div class="section-content"&gt;
            &lt;div class="summary-point"&gt;
              &lt;span class="point-text"&gt;âœ… Extension is loaded and working&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="summary-point"&gt;
              &lt;span class="point-text"&gt;ğŸ¯ Summary formatting is functional&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="summary-point"&gt;
              &lt;span class="point-text"&gt;ğŸš€ Ready for AI-generated content&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `;
    console.log('âœ… Test content injected successfully!');
  }
})();
        </div>
    </div>

    <div id="test-results"></div>

    <script>
        // Test data
        const testData = {
            properFormat: `ğŸ¤ Exploring Key Themes
ğŸš€ Revolutionary AI development enables 10x faster learning across multiple domains
ğŸ’° Investment strategies discussed include diversification and long-term planning approaches
ğŸ§  Cognitive techniques for better information retention and processing efficiency

ğŸŒ Strategic Implications  
âš¡ Market disruption patterns show accelerating technological adoption cycles
ğŸ“ˆ Growth opportunities emerge in sustainable technology and renewable energy sectors
ğŸ¯ Competitive advantages require continuous innovation and adaptive business models`,

            markdownFormat: `## Key Insights
- Revolutionary AI development enables faster learning
- Investment strategies focus on diversification
- Cognitive techniques improve retention

## Strategic Implications
- Market disruption is accelerating
- Growth in sustainable technology
- Innovation drives competitive advantage`,

            numberedFormat: `Key Points:
1. Revolutionary AI development enables 10x faster learning
2. Investment strategies should focus on diversification
3. Cognitive techniques improve information retention
4. Market disruption patterns are accelerating
5. Growth opportunities in sustainable technology`,

            plainFormat: `Revolutionary AI development enables 10x faster learning across multiple domains. Investment strategies discussed include diversification and long-term planning approaches. Cognitive techniques for better information retention and processing efficiency.`
        };

        // Mock extension functionality
        function getHeadlineForType(type) {
            const headlines = {
                insightful: 'ğŸ¯ Key Insights & Learnings',
                funny: 'ğŸ˜„ Humorous Highlights',
                actionable: 'âš¡ Action Items & Takeaways',
                controversial: 'ğŸ”¥ Debate Points & Controversies'
            };
            return headlines[type] || 'ğŸ’¡ Summary Points';
        }

        // Enhanced parsing function (the fixed version)
        function extractEngagingSections(summary, summaryType = 'insightful') {
            if (!summary || typeof summary !== 'string') {
                return [{
                    headline: getHeadlineForType(summaryType),
                    points: [{ text: 'âŒ No content available' }]
                }];
            }

            const lines = summary.split('\n').filter(line => line.trim());
            const sections = [];
            let currentSection = null;
            
            lines.forEach((line, index) => {
                const trimmedLine = line.trim();
                
                // Enhanced section header detection
                if (
                    trimmedLine.match(/^[ğŸ¤ğŸŒğŸ’¡ğŸš€ğŸ”¥âš¡ï¸ğŸ“ˆğŸ¯ğŸ§ ğŸ’°ğŸ¤–ğŸŒŸâš–ï¸ğŸ”®ğŸ› ï¸ğŸ“ŠğŸ¨ğŸ­ğŸªğŸ“šğŸ¬ğŸµ]\s+.+/) ||
                    trimmedLine.match(/^#{1,3}\s+.+/) ||
                    trimmedLine.match(/^\*\*.+\*\*$/) ||
                    (trimmedLine.length > 10 && trimmedLine.split(' ').length <= 6 && trimmedLine.match(/[A-Z]/))
                ) {
                    // New section
                    if (currentSection) sections.push(currentSection);
                    currentSection = {
                        headline: trimmedLine.replace(/^#+\s*/, '').replace(/^\*\*(.*)\*\*$/, '$1'),
                        points: []
                    };
                    
                } else if (trimmedLine.length > 0) {
                    // Content line
                    if (!currentSection) {
                        currentSection = {
                            headline: getHeadlineForType(summaryType),
                            points: []
                        };
                    }
                    
                    let contentText = trimmedLine;
                    
                    // Remove common prefixes and add emoji if needed
                    contentText = contentText.replace(/^[-â€¢*]\s+/, '').replace(/^\d+\.\s+/, '');
                    
                    if (!contentText.match(/^[ğŸš€ğŸ’°ğŸ§ ğŸ¤–ğŸŒğŸ”¥âš¡ï¸ğŸ“ˆğŸ¯ğŸ’¡ğŸ¤ğŸŒŸâš–ï¸ğŸ”®ğŸ› ï¸ğŸ“ŠğŸ¨ğŸ­ğŸªğŸ“šğŸ¬ğŸµ]/)) {
                        contentText = `ğŸ’¡ ${contentText}`;
                    }
                    
                    if (contentText.length > 10) {
                        currentSection.points.push({ text: contentText });
                    }
                }
            });
            
            if (currentSection) sections.push(currentSection);
            
            // Fallback if no proper parsing worked
            if (sections.length === 0 || sections.every(s => s.points.length === 0)) {
                const allContent = lines.filter(line => line.trim().length > 15);
                
                sections.push({
                    headline: getHeadlineForType(summaryType),
                    points: allContent.slice(0, 6).map(line => ({
                        text: line.trim().match(/^[ğŸš€ğŸ’°ğŸ§ ğŸ¤–ğŸŒğŸ”¥âš¡ï¸ğŸ“ˆğŸ¯ğŸ’¡ğŸ¤ğŸŒŸâš–ï¸ğŸ”®ğŸ› ï¸ğŸ“ŠğŸ¨ğŸ­ğŸªğŸ“šğŸ¬ğŸµ]/) 
                            ? line.trim() 
                            : `ğŸ’¡ ${line.trim()}`
                    }))
                });
            }
            
            return sections;
        }

        function runQuickTest() {
            const resultsDiv = document.getElementById('quick-results');
            resultsDiv.innerHTML = '<h3>ğŸ”„ Running Quick Test...</h3>';
            
            let results = [];
            
            // Test each format
            Object.entries(testData).forEach(([name, summary]) => {
                const sections = extractEngagingSections(summary);
                const hasValidContent = sections.length > 0 && sections.some(s => s.points.length > 0);
                
                results.push({
                    name: name,
                    passed: hasValidContent,
                    sections: sections.length,
                    points: sections.reduce((sum, s) => sum + s.points.length, 0)
                });
            });
            
            // Display results
            const passCount = results.filter(r => r.passed).length;
            const totalCount = results.length;
            
            let html = `
                <h3>ğŸ“Š Quick Test Results</h3>
                <div style="margin: 16px 0; padding: 12px; background: ${passCount === totalCount ? '#d4edda' : '#fff3cd'}; border-radius: 8px;">
                    <strong>${passCount}/${totalCount} tests passed</strong>
                    ${passCount === totalCount ? ' ğŸ‰ All tests passing!' : ' âš ï¸ Some issues found'}
                </div>
            `;
            
            results.forEach(result => {
                html += `
                    <div class="test-result ${result.passed ? 'test-pass' : 'test-fail'}">
                        ${result.passed ? 'âœ…' : 'âŒ'} ${result.name}: 
                        ${result.sections} sections, ${result.points} points
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }

        function runFullTest() {
            // This would run the comprehensive test suite
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `
                <div class="test-section">
                    <h2>ğŸ”¬ Full Test Suite</h2>
                    <p>For the complete test suite, copy the code from <code>test-summary-functionality.js</code> 
                    and paste it into your browser console on a YouTube page with the extension loaded.</p>
                    <div class="test-result test-pass">
                        âœ… Enhanced parsing function works correctly
                    </div>
                    <div class="test-result test-fail">
                        âŒ Original function needs the fix from quick-fix-paste.js
                    </div>
                </div>
            `;
        }

        function clearResults() {
            document.getElementById('quick-results').innerHTML = '';
            document.getElementById('test-results').innerHTML = '';
        }

        function copyConsoleTest() {
            const code = document.getElementById('console-test-code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('âœ… Console test code copied to clipboard!');
            });
        }

        // Auto-run quick test on page load
        setTimeout(runQuickTest, 1000);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Youtube Summarizer</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    
    <!-- Header (Always visible) -->
    <header class="app-header">
      <div class="brand">
        <span class="brand-icon">‚ú®</span>
        <span class="brand-name">AI Youtube Summarizer</span>
      </div>
      <div id="connection-status" class="connection-indicator connected" title="Connected to backend">
        <span class="indicator-dot"></span>
      </div>
    </header>

    <!-- Loading View -->
    <div id="loading-view" class="view">
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Connecting...</p>
      </div>
    </div>

    <!-- Not Authenticated View -->
    <div id="not-authenticated-view" class="view hidden">
      <div class="auth-hero">
        <div class="hero-icon">üîê</div>
        <h2>Welcome to AI Youtube Summarizer</h2>
        <p>Sign in to unlock AI-powered summaries and chat for any YouTube video.</p>
        
        <button id="sign-in-btn" class="btn btn-primary btn-lg">
          <span class="btn-icon">üöÄ</span>
          Sign In with Google
        </button>
        
        <div class="sync-status" id="sync-status">
          <!-- Status messages will appear here -->
        </div>
      </div>
      
      <div class="feature-list">
        <div class="feature-item">
          <span class="check">‚úì</span>
          <span>Instant video summaries</span>
        </div>
        <div class="feature-item">
          <span class="check">‚úì</span>
          <span>Interactive AI Chat</span>
        </div>
        <div class="feature-item">
          <span class="check">‚úì</span>
          <span>Time-stamped insights</span>
        </div>
      </div>
    </div>

    <!-- Authenticated View -->
    <div id="authenticated-view" class="view hidden">
      
      <!-- Profile Card -->
      <div class="profile-card">
        <div class="profile-header">
          <div class="avatar-container">
            <img id="user-avatar" src="" alt="Profile" />
          </div>
          <div class="profile-info">
            <h3 id="user-name">User Name</h3>
            <span id="plan-badge" class="badge">Free Plan</span>
          </div>
        </div>
        <div class="profile-actions">
          <button id="sign-out-btn" class="btn-icon-only" title="Sign Out">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>

      <!-- Usage Stats -->
      <div class="section usage-section">
        <div class="section-header">
          <h4>Your Usage</h4>
          <span id="plan-expiry" class="expiry-text">Resets monthly</span>
        </div>
        
        <!-- Summaries Usage -->
        <div class="usage-item">
          <div class="usage-label">
            <span>Monthly Summaries</span>
            <span id="summaries-count" class="usage-value">0/50</span>
          </div>
          <div class="progress-bar">
            <div id="summaries-progress" class="progress-fill" style="width: 0%"></div>
          </div>
        </div>

        <!-- Chat Usage -->
        <div class="usage-item">
          <div class="usage-label">
            <span>Monthly Chat</span>
            <span id="chat-count" class="usage-value">0/3</span>
          </div>
          <div class="progress-bar">
            <div id="chat-progress" class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- Main Actions -->
      <div class="action-grid">
        <button id="go-to-website-btn" class="btn btn-secondary">
          <span class="btn-icon">üåê</span>
          Dashboard
        </button>
        <button id="upgrade-plan-btn" class="btn btn-primary hidden">
          <span class="btn-icon">‚ö°</span>
          Upgrade
        </button>
      </div>

      <!-- Quick Settings -->
      <div class="section settings-section">
        <h4>Preferences</h4>
        <div class="setting-row">
          <label for="auto-summarize">Auto-summarize</label>
          <div class="toggle-switch">
            <input type="checkbox" id="auto-summarize" checked>
            <span class="slider"></span>
          </div>
        </div>
        <div class="setting-row">
          <label for="summary-style">Style</label>
          <select id="summary-style" class="select-input">
            <option value="insightful">Insightful</option>
            <option value="funny">Funny</option>
            <option value="actionable">Actionable</option>
            <option value="controversial">Controversial</option>
          </select>
        </div>
      </div>

    </div>

    <!-- Footer -->
    <footer class="app-footer">
      <small id="extension-version">v1.6.0</small>
      <div class="footer-links">
        <a href="https://www.clicksummary.com/help" target="_blank">Help</a>
        <a href="https://www.clicksummary.com/privacy" target="_blank">Privacy</a>
      </div>
    </footer>

  </div>

  <script src="popup.js"></script>
</body>
</html>